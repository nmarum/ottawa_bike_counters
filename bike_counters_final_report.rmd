---
title: "Ottawa Bike Counter Machine Learning Project"
author: "Nick Marum"
date: "28/10/2020"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)


if(!require(lubridate)) install.packages("lubridate")
if(!require(caret)) install.packages("caret")
if(!require(rpart)) install.packages("rpart")
if(!require(arm)) install.packages("arm")
if(!require(randomForest)) install.packages("randomForest")

library(tidyverse)
library(lubridate) #for parsing of dates
library(caret) #includes several ML algorithms, including KNN3.
library(rpart) #provide a regression tree ML algorithm
library(arm) #for naive bayesian ML algorithm
library(randomForest) #for random forest ML algorithm

url1 <- "https://raw.githubusercontent.com/nmarum/ottawa_bike_counters/master/ml_friendly_bike_counters.csv"
url2 <- "https://raw.githubusercontent.com/nmarum/ottawa_bike_counters/master/ottawa_bike_counters.csv"

download.file(url1, destfile = "ml_friendly_bike_counters.csv") #ML friendly csv with weather info
download.file(url2, destfile = "ottawa_bike_counters.csv")#bike ride count data only BUT with date

dat <- read_csv("ml_friendly_bike_counters.csv")
alt <- read_csv("ottawa_bike_counters.csv")

df <- as_tibble(unique(dat$day))#single col tibble of "days" from ML friendly csv
df2 <- as_tibble(unique(as.Date(alt$Date)))#single col tibble of "dates"
df <- cbind(df, df2)#binding two together 
colnames(df) <- c("day", "date")
head(df)

dat <- dat %>% left_join(df, by="day") #adding a actual date field to ML friendly data.
#I am hoping this will make data exploration easier.

head(dat)
dat <- dat[1:28776,] #selecting entries which contain weather data (to end of 2018) .
rm("df", "df2")
```

*INTRODUCTION*

This report provides the  exploratory analysis and machine learning model building for a machine learning project for the HarvardX capstone project.  It is uses publicly available City of Ottawa bike ride counter data from public pathways in Ottawa, Ontario CANADA as well as publicly available weather data from Environment Canada.

The data used in this project werefound in zip format on Kaggle at the following address: https://www.kaggle.com/m7homson/ottawa-bike-counters/download
To access it on Kaggle you have to create an account and login which 
is a challenge to do in the R environment.  

Since kaggle requires an account and login to access the data, I have shared the inforamtion on my github repo.  A copy of the final script, including data import and wrangling is included on my github repo: https://github.com/nmarum/ottawa_bike_counters

The reason why I selected this particular dataset for this project is that I live in Ottawa, Ontario Canada and am a regular bike rider, who commutes to and from work about 8 months of the year.  There is an extensive network of pathways in Ottawa, with several bike counters that are prominently placed.  It appealed to me to use a data set to make predictions about something I am very familiar with.

*EXPLORATORY ANALYSIS*
```{r}
dat %>%
  group_by(location_name) %>%
  summarize(mean_count = mean(count),
            prop_zerocount = mean(count==0),
            entries = n()) %>%
  arrange(desc(entries))  

```
Shows the bike counter along Colonel By Drive near the Corktown footbridge (COBY)as the counter with the most overall entries/fewest missing entries.  COBY also has a relatively low proportion of "0" count/no bike entries (1.7%).  While not the busiest counter, the consistent entries seem promising from a predictive perspective.

A city of Ottawa legend for the bike counter data provides the following description for the COBY counter:  "3_COBY: National Capital Commission (NCC) Eastern Canal Pathway approximately 100m north of the Corktown Bridge. #WINTER counter"

"The data provides counts of bike trips (both directions summed unless otherwise 
noted)" COBY has not footnote associated with it so the data must be both directions.

This counter also appeals to me since it is close to my workplace and I have passed by this stretch of the Col By pathway near the Corktown Bridge hundreds if not thousands of times.


```{r cars}
summary(cars)
```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
